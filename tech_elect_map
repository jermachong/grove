#!/bin/bash

# Technical Electives Course Map CLI Tool
# This script automatically activates the virtual environment and runs the CLI tool

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Check if virtual environment exists
if [ ! -d "$SCRIPT_DIR/.venv" ]; then
    echo "❌ Virtual environment not found at $SCRIPT_DIR/.venv"
    echo "Please create a virtual environment and install PyMuPDF:"
    echo "  python -m venv .venv"
    echo "  source .venv/bin/activate"
    echo "  pip install PyMuPDF"
    exit 1
fi

# Check if PyMuPDF is installed in the virtual environment
if ! "$SCRIPT_DIR/.venv/bin/python" -c "import pymupdf" 2>/dev/null; then
    echo "❌ PyMuPDF not found in virtual environment"
    echo "Please install PyMuPDF:"
    echo "  source .venv/bin/activate"
    echo "  pip install PyMuPDF"
    exit 1
fi

# Run the CLI tool with the virtual environment Python
"$SCRIPT_DIR/.venv/bin/python" "$SCRIPT_DIR/tech_elect_cli.py" "$@"